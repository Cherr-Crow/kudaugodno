# Generated by Django 5.2.4 on 2025-08-06 13:10

import blogs.models
import django.contrib.postgres.fields
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ("blogs", "0001_initial"),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.AlterModelOptions(
            name="article",
            options={
                "ordering": ["-published_at", "-created_at"],
                "verbose_name": "Статья",
                "verbose_name_plural": "Статьи",
            },
        ),
        migrations.RemoveIndex(
            model_name="article",
            name="blogs_artic_status_1a1746_idx",
        ),
        migrations.RenameIndex(
            model_name="reaction",
            new_name="reaction_idx",
            old_name="blogs_react_article_85d640_idx",
        ),
        migrations.AlterUniqueTogether(
            name="commentlike",
            unique_together=set(),
        ),
        migrations.AlterUniqueTogether(
            name="reaction",
            unique_together=set(),
        ),
        migrations.AddField(
            model_name="article",
            name="published_at",
            field=models.DateTimeField(
                blank=True, db_index=True, null=True, verbose_name="Дата публикации"
            ),
        ),
        migrations.AlterField(
            model_name="article",
            name="countries",
            field=django.contrib.postgres.fields.ArrayField(
                base_field=models.CharField(
                    choices=[
                        ("AF", "Афганистан"),
                        ("AX", "Аландские острова"),
                        ("AL", "Албания"),
                        ("DZ", "Алжир"),
                        ("AS", "Американское Самоа"),
                        ("AD", "Андорра"),
                        ("AO", "Ангола"),
                        ("AI", "Ангилья"),
                        ("AQ", "Антарктида"),
                        ("AG", "Антигуа и Барбуда"),
                        ("AR", "Аргентина"),
                        ("AM", "Армения"),
                        ("AW", "Аруба"),
                        ("AU", "Австралия"),
                        ("AT", "Австрия"),
                        ("AZ", "Азербайджан"),
                        ("BS", "Багамы"),
                        ("BH", "Бахрейн"),
                        ("BD", "Бангладеш"),
                        ("BB", "Барбадос"),
                        ("BY", "Беларусь"),
                        ("BE", "Бельгия"),
                        ("BZ", "Белиз"),
                        ("BJ", "Бенин"),
                        ("BM", "Бермуды"),
                        ("BT", "Бутан"),
                        ("BO", "Боливия"),
                        ("BQ", "Бонайре, Синт-Эстатиус и Саба"),
                        ("BA", "Босния и Герцеговина"),
                        ("BW", "Ботсвана"),
                        ("BV", "Остров Буве"),
                        ("BR", "Бразилия"),
                        ("IO", "Британская территория в Индийском океане"),
                        ("BN", "Бруней"),
                        ("BG", "Болгария"),
                        ("BF", "Буркина-Фасо"),
                        ("BI", "Бурунди"),
                        ("CV", "Кабо-Верде"),
                        ("KH", "Камбоджа"),
                        ("CM", "Камерун"),
                        ("CA", "Канада"),
                        ("KY", "Каймановы острова"),
                        ("CF", "ЦАР"),
                        ("TD", "Чад"),
                        ("CL", "Чили"),
                        ("CN", "Китай"),
                        ("CX", "Остров Рождества"),
                        ("CC", "Кокосовые острова"),
                        ("CO", "Колумбия"),
                        ("KM", "Коморы"),
                        ("CG", "Конго"),
                        ("CD", "ДР Конго"),
                        ("CK", "Острова Кука"),
                        ("CR", "Коста-Рика"),
                        ("CI", "Кот-д’Ивуар"),
                        ("HR", "Хорватия"),
                        ("CU", "Куба"),
                        ("CW", "Кюрасао"),
                        ("CY", "Кипр"),
                        ("CZ", "Чехия"),
                        ("DK", "Дания"),
                        ("DJ", "Джибути"),
                        ("DM", "Доминика"),
                        ("DO", "Доминикана"),
                        ("EC", "Эквадор"),
                        ("EG", "Египет"),
                        ("SV", "Сальвадор"),
                        ("GQ", "Экваториальная Гвинея"),
                        ("ER", "Эритрея"),
                        ("EE", "Эстония"),
                        ("SZ", "Эсватини"),
                        ("ET", "Эфиопия"),
                        ("FK", "Фолклендские острова"),
                        ("FO", "Фарерские острова"),
                        ("FJ", "Фиджи"),
                        ("FI", "Финляндия"),
                        ("FR", "Франция"),
                        ("GF", "Французская Гвиана"),
                        ("PF", "Французская Полинезия"),
                        ("TF", "Французские Южные территории"),
                        ("GA", "Габон"),
                        ("GM", "Гамбия"),
                        ("GE", "Грузия"),
                        ("DE", "Германия"),
                        ("GH", "Гана"),
                        ("GI", "Гибралтар"),
                        ("GR", "Греция"),
                        ("GL", "Гренландия"),
                        ("GD", "Гренада"),
                        ("GP", "Гваделупа"),
                        ("GU", "Гуам"),
                        ("GT", "Гватемала"),
                        ("GG", "Гернси"),
                        ("GN", "Гвинея"),
                        ("GW", "Гвинея-Бисау"),
                        ("GY", "Гайана"),
                        ("HT", "Гаити"),
                        ("HM", "Острова Херд и Макдональд"),
                        ("VA", "Ватикан"),
                        ("HN", "Гондурас"),
                        ("HK", "Гонконг"),
                        ("HU", "Венгрия"),
                        ("IS", "Исландия"),
                        ("IN", "Индия"),
                        ("ID", "Индонезия"),
                        ("IR", "Иран"),
                        ("IQ", "Ирак"),
                        ("IE", "Ирландия"),
                        ("IM", "Остров Мэн"),
                        ("IL", "Израиль"),
                        ("IT", "Италия"),
                        ("JM", "Ямайка"),
                        ("JP", "Япония"),
                        ("JE", "Джерси"),
                        ("JO", "Иордания"),
                        ("KZ", "Казахстан"),
                        ("KE", "Кения"),
                        ("KI", "Кирибати"),
                        ("KP", "КНДР"),
                        ("KR", "Корея"),
                        ("KW", "Кувейт"),
                        ("KG", "Киргизия"),
                        ("LA", "Лаос"),
                        ("LV", "Латвия"),
                        ("LB", "Ливан"),
                        ("LS", "Лесото"),
                        ("LR", "Либерия"),
                        ("LY", "Ливия"),
                        ("LI", "Лихтенштейн"),
                        ("LT", "Литва"),
                        ("LU", "Люксембург"),
                        ("MO", "Макао"),
                        ("MG", "Мадагаскар"),
                        ("MW", "Малави"),
                        ("MY", "Малайзия"),
                        ("MV", "Мальдивы"),
                        ("ML", "Мали"),
                        ("MT", "Мальта"),
                        ("MH", "Маршалловы острова"),
                        ("MQ", "Мартиника"),
                        ("MR", "Мавритания"),
                        ("MU", "Маврикий"),
                        ("YT", "Майотта"),
                        ("MX", "Мексика"),
                        ("FM", "Микронезия"),
                        ("MD", "Молдова"),
                        ("MC", "Монако"),
                        ("MN", "Монголия"),
                        ("ME", "Черногория"),
                        ("MS", "Монтсеррат"),
                        ("MA", "Марокко"),
                        ("MZ", "Мозамбик"),
                        ("MM", "Мьянма"),
                        ("NA", "Намибия"),
                        ("NR", "Науру"),
                        ("NP", "Непал"),
                        ("NL", "Нидерланды"),
                        ("NC", "Новая Каледония"),
                        ("NZ", "Новая Зеландия"),
                        ("NI", "Никарагуа"),
                        ("NE", "Нигер"),
                        ("NG", "Нигерия"),
                        ("NU", "Ниуэ"),
                        ("NF", "Остров Норфолк"),
                        ("MK", "Северная Македония"),
                        ("MP", "Северные Марианские острова"),
                        ("NO", "Норвегия"),
                        ("OM", "Оман"),
                        ("PK", "Пакистан"),
                        ("PW", "Палау"),
                        ("PS", "Палестина"),
                        ("PA", "Панама"),
                        ("PG", "Папуа — Новая Гвинея"),
                        ("PY", "Парагвай"),
                        ("PE", "Перу"),
                        ("PH", "Филиппины"),
                        ("PN", "Острова Питкэрн"),
                        ("PL", "Польша"),
                        ("PT", "Португалия"),
                        ("PR", "Пуэрто-Рико"),
                        ("QA", "Катар"),
                        ("RE", "Реюньон"),
                        ("RO", "Румыния"),
                        ("RU", "Россия"),
                        ("RW", "Руанда"),
                        ("BL", "Сен-Бартелеми"),
                        ("SH", "Остров Святой Елены"),
                        ("KN", "Сент-Китс и Невис"),
                        ("LC", "Сент-Люсия"),
                        ("MF", "Сен-Мартен"),
                        ("PM", "Сен-Пьер и Микелон"),
                        ("VC", "Сент-Винсент и Гренадины"),
                        ("WS", "Самоа"),
                        ("SM", "Сан-Марино"),
                        ("ST", "Сан-Томе и Принсипи"),
                        ("SA", "Саудовская Аравия"),
                        ("SN", "Сенегал"),
                        ("RS", "Сербия"),
                        ("SC", "Сейшелы"),
                        ("SL", "Сьерра-Леоне"),
                        ("SG", "Сингапур"),
                        ("SX", "Синт-Мартен"),
                        ("SK", "Словакия"),
                        ("SI", "Словения"),
                        ("SB", "Соломоновы острова"),
                        ("SO", "Сомали"),
                        ("ZA", "ЮАР"),
                        ("GS", "Южная Георгия и Южные Сандвичевы острова"),
                        ("SS", "Южный Судан"),
                        ("ES", "Испания"),
                        ("LK", "Шри-Ланка"),
                        ("SD", "Судан"),
                        ("SR", "Суринам"),
                        ("SJ", "Шпицберген и Ян-Майен"),
                        ("SE", "Швеция"),
                        ("CH", "Швейцария"),
                        ("SY", "Сирия"),
                        ("TW", "Тайвань"),
                        ("TJ", "Таджикистан"),
                        ("TZ", "Танзания"),
                        ("TH", "Таиланд"),
                        ("TL", "Тимор-Лесте"),
                        ("TG", "Того"),
                        ("TK", "Токелау"),
                        ("TO", "Тонга"),
                        ("TT", "Тринидад и Тобаго"),
                        ("TN", "Тунис"),
                        ("TR", "Турция"),
                        ("TM", "Туркменистан"),
                        ("TC", "Острова Тёркс и Кайкос"),
                        ("TV", "Тувалу"),
                        ("UG", "Уганда"),
                        ("UA", "Украина"),
                        ("AE", "ОАЭ"),
                        ("GB", "Великобритания"),
                        ("US", "США"),
                        ("UM", "Малые Тихоокеанские отдаленные острова США"),
                        ("UY", "Уругвай"),
                        ("UZ", "Узбекистан"),
                        ("VU", "Вануату"),
                        ("VE", "Венесуэла"),
                        ("VN", "Вьетнам"),
                        ("VG", "Британские Виргинские острова"),
                        ("VI", "Виргинские острова (США)"),
                        ("WF", "Уоллис и Футуна"),
                        ("EH", "САДР"),
                        ("YE", "Йемен"),
                        ("ZM", "Замбия"),
                        ("ZW", "Зимбабве"),
                    ],
                    max_length=2,
                ),
                blank=True,
                default=list,
                size=None,
                verbose_name="Страны",
            ),
        ),
        migrations.AlterField(
            model_name="article",
            name="cover_image",
            field=models.ImageField(
                upload_to="articles/covers/",
                validators=[blogs.models.validate_file_size],
                verbose_name="Обложка",
            ),
        ),
        migrations.AlterField(
            model_name="article",
            name="meta_description",
            field=models.CharField(
                blank=True, max_length=160, null=True, verbose_name="SEO description"
            ),
        ),
        migrations.AlterField(
            model_name="article",
            name="meta_title",
            field=models.CharField(
                blank=True, max_length=255, null=True, verbose_name="SEO title"
            ),
        ),
        migrations.AlterField(
            model_name="article",
            name="rating",
            field=models.FloatField(default=0, verbose_name="Рейтинг"),
        ),
        migrations.AlterField(
            model_name="article",
            name="short_description",
            field=models.CharField(max_length=250, verbose_name="Краткое описание"),
        ),
        migrations.AlterField(
            model_name="article",
            name="status",
            field=models.CharField(
                choices=[
                    ("draft", "Черновик"),
                    ("on_review", "На модерации"),
                    ("published", "Опубликована"),
                    ("rejected", "Отклонена"),
                ],
                db_index=True,
                default="draft",
                max_length=15,
                verbose_name="Статус",
            ),
        ),
        migrations.AlterField(
            model_name="category",
            name="name",
            field=models.CharField(max_length=100, verbose_name="Название"),
        ),
        migrations.AlterField(
            model_name="category",
            name="slug",
            field=models.SlugField(
                blank=True, max_length=100, unique=True, verbose_name="Slug"
            ),
        ),
        migrations.AlterField(
            model_name="comment",
            name="status",
            field=models.CharField(
                choices=[
                    ("pending", "На модерации"),
                    ("approved", "Одобрен"),
                    ("rejected", "Отклонён"),
                ],
                default="pending",
                max_length=10,
                verbose_name="Статус",
            ),
        ),
        migrations.AlterField(
            model_name="mediaasset",
            name="file",
            field=models.FileField(
                upload_to="articles/media/",
                validators=[blogs.models.validate_file_size],
                verbose_name="Файл",
            ),
        ),
        migrations.AlterField(
            model_name="tag",
            name="name",
            field=models.CharField(max_length=100, verbose_name="Название"),
        ),
        migrations.AlterField(
            model_name="tag",
            name="slug",
            field=models.SlugField(
                blank=True, max_length=100, unique=True, verbose_name="Slug"
            ),
        ),
        migrations.AlterField(
            model_name="theme",
            name="name",
            field=models.CharField(max_length=100, verbose_name="Название"),
        ),
        migrations.AlterField(
            model_name="theme",
            name="slug",
            field=models.SlugField(
                blank=True, max_length=100, unique=True, verbose_name="Slug"
            ),
        ),
        migrations.AddIndex(
            model_name="article",
            index=models.Index(
                fields=["status", "-published_at"], name="status_pub_idx"
            ),
        ),
        migrations.AddConstraint(
            model_name="commentlike",
            constraint=models.UniqueConstraint(
                fields=("comment", "user"), name="unique_comment_reaction"
            ),
        ),
        migrations.AddConstraint(
            model_name="reaction",
            constraint=models.UniqueConstraint(
                fields=("user", "article"), name="unique_article_reaction"
            ),
        ),
    ]
